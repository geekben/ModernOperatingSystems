##1.3 计算机硬件概览
操作系统与其运行的硬件环境是紧密相关的。它延伸了计算机的指令集并且为计算机管理各种资源。要让计算机正常工作，操作系统必须非常了解硬件，至少要对这些硬件暴露给程序员的接口了如指掌。因此，让我们简要的浏览一下当今计算机系统通常使用的硬件设备。有了这些知识，我们就能开始详细了解操作系统和其运行原理。

一个简单的个人计算机可以被抽象为图1-6那样的模型。CPU，内存和IO设备都连接在一条系统总线上，并通过这条总线相互通信。现代操作系统具有更加复杂的结构，有多种总线，我们后面会谈到。暂时来说，这种模型就足够分析问题了。后面的章节中，我们将简要概述上述各个组成部件，并且深入剖析一些操作系统设计者们关系的硬件问题。不用说，这将是个非常简洁的综述。关于计算机硬件和计算机组成的书有很多。两本最著名的是 Tanenbaum and Austin (2012) 和 Patterson and Hennessy (2013)。

###1.3.1 处理器
计算机的大脑是CPU，它从内存中取指令并执行。CPU最简单的工作流程就是，从内存读取第一条指令，解码以确定其类型和操作数，执行它，然后读取，解码，执行后续的指令。这种流程被一直重复，直到程序结束。程序就是这样被运行的。

每种CPU都有其独有的指令集。因此，x86处理器不能执行ARM的程序，反之亦然。因为访问内存读取指令和数据的时间比执行指令的时间长很多，所以所有CPU都拥有一些寄存器，用于存放关键变量和临时结果。因此，指令集都包含了从内存加载数据到寄存器和保存寄存器数据到内存的指令。其他一些指令，将两个操作数组合为一个结果，这两个操作数可以来自内存也可以来自寄存器，或者各取一个；比如就有指令将两个操作数做加法，结果存入寄存器或者内存中。

除了上述用于存放数据的通用寄存器，大多处理器含有一些程序员可见的特殊寄存器。其中之一是**程序计数器**，它包含了下一条要读取的指令的内存地址。处理器读取了一条指令后，程序计数器将被更新，指向下一条指令。

另一个寄存器是**栈指针**，它指向内存中栈的顶端。栈保存了每个已经开始但尚未结束的程序流程的数据帧。这种数据帧包含了入参，局部变量和没有使用寄存器保存的临时变量。

再一个寄存器是**PSW**（程序状态字）。这个寄存器包含了数个条件码bits*N(negative)Z(zero)V(overflow)C(carry)*，它们由比较指令来设置，还包含了CPU优先级寄存器，运行模式（用户态或内核态），还有一些其他控制位。用户态程序通常可以读取整个PSW，但是只能写其中一些位。PSW寄存器在系统调用和IO中扮演了重要角色*x86的EFlags包含了上面的条件码bits*。
